<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>SoME: Book History</title>
		<meta name="author" content="Stephen Houser">
		<meta content="Display books read by the Southern Maine Men's Book Club'" />

		<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.0.min.js"></script>

		<script type="text/javascript" src="http://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
		<link rel="stylesheet" href="http://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">

		<!-- Bootstrap Tables -->
		<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.css">
		<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/locale/bootstrap-table-zh-CN.min.js"></script>

		<link href="http://stephenhouser.com/css/main.css" rel="stylesheet">

		<style>
			.wrapper { max-width: 80%; }
		</style>
	</head>
	<body>
		<div class="page-content"><div class="wrapper">
			<div class="container-fluid">

				<h1>Southern Maine Men's Book Club</h1>
				<h2>Book History</h2>

				<p>This is a list of all the books we have read as a group since November 2004. 
					You can find more information about us and our books on <a href="https://www.goodreads.com/group/show/56478-southern-maine-men-s-book-club">Good Reads</a>.
			
				<table id="some-books" class="display" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th>Meeting Date</th>
							<th>Cover</th>
							<th>Title</th>
							<th>Author</th>
							<th>Leader</th>
							<th>Notes</th>
						</tr>
					</thead>
					<tfoot>
						<tr>
							<th>Meeting Date</th>
							<th>Cover</th>
							<th>Title</th>
							<th>Author</th>
							<th>Leader</th>
							<th>Notes</th>
						</tr>
					</tfoot>
				</table>

			</div><!-- /.container -->

			<footer class='footer'>
				<div class='container-fluid'>
					<hr />
					<p class='pull-right'><a href='https://github.com/stephenhouser/some-books'>Some-Books</a> by <a href='http://stephenhouser.com'>Stephen Houser</a></p>
				</div>
			</footer>
		
		</div></div>

		<script type="text/javascript">
			function amazon_product_uri(isbn) {
				return "http://www.amazon.com/dp/product/" + isbn;
			}

			function amazon_thumbnamil_uri(isbn) {
				return "http://images.amazon.com/images/P/" + isbn + ".01.jpg";
			}

			function amazon_cover_uri(isbn) {
				return "http://images.amazon.com/images/P/" + isbn + ".jpg";
			}


			function book_uri(row) {
				if (row["uri"]) {
					return row["uri"];
				} else {
					return amazon_product_uri(row["isbn"]);
				}
			}

			function thumbnail_uri(row) {
				if (row["thumbnail"]) {
					return row["thumbnail"];
				} else {
					return amazon_thumbnamil_uri(row["isbn"]);
				}
			}

			$(document).ready(function() {
				$('#some-books').DataTable( {
					"ajax": {
						"url": "some-books.json",
						"dataSrc": ""
					},
					"paging": false,
					"order": [[0, "desc"]],
					"columns": [
						{ "data": "date", "width": "12%" },
						{ "data": null, "orderable": false },
						{ "data": "title" },
						{ "data": "author" },
						{ "data": "leader", "defaultContent": "" },
						{ "data": "notes", "defaultContent": "", "width": "15%" }
					],
					"columnDefs": [
						{	
							"targets": 1,
							"render": function(data, type, row) {
								return "<a href='" + book_uri(row) + "' target='_blank'>"
									+ "<img height='100' src='" + thumbnail_uri(row) + "' />"
									//+ "<img height='100' src='" + amazon_thumbnamil_uri(row["isbn"]) + "' />"
									//+ "<img height='100' src='" + row["cover_thumbnail"] + "' />"
									+ "</a>";
							}
						},
						{	
							"targets": 2,
							"render": function(data, type, row) {
								return "<a href='" + book_uri(row) + "' target='_blank'>" + data + "</a>";
							}
						}
					]
				} );
			} );
		</script>
	</body>
</html>
